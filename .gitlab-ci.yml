image: python:latest

before_script:
 - apt-get update --yes
 - apt-get install --yes cmake

stages:
  - build 
  - test
  #- deploy
  

build:
  stage: test
  script:
  - apt
  - python -m pip install ./
  rules:
    - if: $CI_COMMIT_REF_NAME != $CI_DEFAULT_BRANCH

test:
  stage: test
  script:
  - pytest .
  rules:
    - if: $CI_COMMIT_REF_NAME != $CI_DEFAULT_BRANCH
    
#deploy-pages:
#  stage: deploy
#  script:
#  - mkdir .public
#  - cp -r docs/build/html/* .public
#  artifacts:
#    paths:
#    - public
#  rules:
#    - if: $CI_COMMIT_REF_NAME == $CI_DEFAULT_BRANCH

